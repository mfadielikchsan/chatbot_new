/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/bytez.js@1.1.18/dist/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class t{constructor(t,e=!1,i="undefined"!=typeof window){this.#t=i,this.host=`http${e?"://localhost:8080":"s://api.bytez.com"}/models/v2/`,this.headers={lang:"javascript",Authorization:`Key ${t}`,"content-type":"application/json"},!1===i&&(import("/npm/stream/+esm").then((t=>{this.#e=t.Readable??t.default?.Readable})),new Function('return import("undici")')().then((({Agent:t})=>{this.#i=new t({keepAliveTimeout:this.#s,keepAliveMaxTimeout:this.#s,connectTimeout:this.#s,headersTimeout:this.#s,bodyTimeout:this.#s})})))}#e;#t;#i;#s=9e5;host="";headers={};async request(t,e,i,s){try{const o=await fetch(this.host+t,{method:e,headers:void 0===s?this.headers:{...this.headers,"provider-key":s},dispatcher:this.#i,signal:AbortSignal.timeout(this.#s),body:i?JSON.stringify(i):void 0});if("POST"===e&&!o.ok&&"application/json"!==o.headers.get("content-type")){const{error:t}=await o.json().catch(console.error);throw new Error(t||o.statusText)}return null===o.body||!0!==i?.stream&&!1!==i?.json?await o.json():this.#t?o.body:this.#e.fromWeb(o.body)}catch(t){return{error:t.message,output:null}}}}class e{constructor(t,e,i,s){this.#o=i,this.id=t,this.#a=s,this.#r=e.list.models({modelId:t}).then((t=>{this.details=t?.output?.[0]??{},this.#n=["text-to-audio","text-to-image","text-to-video","text-to-speech"].includes(this.details.task)}))}#o;#r;#n=!1;#a;id;params;details;async run(t,e,i){const s={params:"boolean"==typeof e||void 0===e?void 0:e};return await this.#r,!0!==e&&!0!==i||(this.#n?s.json=!1:s.stream=!0),s.input=t,this.#o.request(this.id,"POST",s,this.#a)}}class i{constructor(e,i=!1,s){this.key=e,this.#o=new t(e,i,s)}#o;key="";list={models:t=>this.#o.request(`list/models${t?.task?`?task=${t.task}`:""}${t?.modelId?`?modelId=${t.modelId}`:""}`),tasks:()=>this.#o.request("list/tasks")};model=(t,i)=>new e(t,this,this.#o,i)}export{i as default};
//# sourceMappingURL=/sm/61c440a92365f9a5f5b3c45818d3930e594aad582e2492c695bf7baf0f8803a1.map